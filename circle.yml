--- 
dependencies: 
  cache_directories: 
    - ~/.rvm/rubies
    - ~/vendor
  override: 
    - "./scripts/circle.bash bundle"
deployment: 
  bugfix: 
    branch: /^bugfix.*/
    commands: 
      - "./scripts/circle.bash merge release/patch"
  improvement: 
    branch: /^improvement.*/
    commands: 
      - "./scripts/circle.bash merge release/patch"
  master: 
    branch: master
    commands: 
      - "./scripts/circle.bash merge release/latest"
      - "./scripts/circle.bash deploy"
  patch_release: 
    branch: release/patch
    commands: 
      - "./scripts/circle.bash merge release/minor"
machine: 
  services: 
    - docker
notify: 
  webhooks: 
    - 
      url: "https://webhooks.gitter.im/e/da8c065419a91983f0cf"
test: 
  override:
    - "./scripts/circle.bash unit_tests"
        parallel: true
    - 
      ? "./scripts/circle.bash acceptance_tests circle_debian7"
      : 
        parallel: true
        timeout: 300
    - 
      ? "./scripts/circle.bash acceptance_tests circle_ubuntu14"
      : 
        parallel: true
        timeout: 300
